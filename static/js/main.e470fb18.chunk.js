(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{202:function(e,t,a){},204:function(e,t,a){},206:function(e,t,a){},208:function(e,t,a){},210:function(e,t,a){},212:function(e,t,a){},214:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(76),c=a.n(r),l=a(19),i=a(20),s=a(217),d=(a(86),a(88),a(37)),u=a(38),m=a(3),h=a(4),f=a(6),p=a(5),v=a(7),N=a(215),b=a(97),E=a(10),g=a(216),y=a(79),j=a(80);a(92);function O(e){e.tag,e.className,e.children;var t=Object(j.a)(e,["tag","className","children"]);return o.a.createElement(e.tag,Object(y.a)({className:["NavCircleButton",e.className].join(" ")},t),e.children)}O.defaultProps={tag:"a"};var k=o.a.createContext({notes:[],folders:[],addFolder:function(){},addNote:function(){},deleteNote:function(){},handleAddNote:function(){},handleAddFolder:function(){},handleDeleteNote:function(){}}),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find(function(e){return e.id===t})},F=(a(94),function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.context,t=e.folders,a=void 0===t?[]:t,n=e.notes,r=void 0===n?[]:n;return o.a.createElement("div",{className:"NoteListNav"},o.a.createElement("ul",{className:"NoteListNav__list"},a.map(function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(g.a,{className:"NoteListNav__folder-link",to:"/folder/".concat(e.id)},o.a.createElement("span",{className:"NoteListNav__num-notes"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter(function(e){return e.folderId===t}).length}(r,e.id)),e.name))})),o.a.createElement("div",{className:"NoteListNav__button-wrapper"},o.a.createElement(O,{tag:b.a,to:"/add-folder",type:"button",className:"NoteListNav__add-folder-button"},o.a.createElement(E.a,{icon:"plus"}),o.a.createElement("br",null),"Folder")))}}]),t}(o.a.Component));F.contextType=k;a(98);var C=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.context,a=t.notes,n=t.folders,r=this.props.match.params.noteId,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find(function(e){return e.id===t})}(n,(_(a,r)||{}).folderId);return o.a.createElement("div",{className:"NotePageNav"},o.a.createElement(O,{tag:"button",role:"link",onClick:function(){return e.props.history.goBack()},className:"NotePageNav__back-button"},o.a.createElement(E.a,{icon:"chevron-left"}),o.a.createElement("br",null),"Back"),c&&o.a.createElement("h3",{className:"NotePageNav__folder-name"},c.name))}}]),t}(o.a.Component);C.defaultProps={history:{goBack:function(){}},match:{params:{}}},C.contextType=k;var P=a(78),x=(a(202),{PORT_URL:"https://vast-eyrie-10587.herokuapp.com"}),S=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(f.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).handleClickDelete=function(e){e.preventDefault();var t=a.props.id;fetch("".concat(x.PORT_URL,"/api/notes/").concat(t),{method:"DELETE",headers:{"content-type":"application/json"}}).then(function(e){if(!e.ok)throw new Error(e.status);a.context.deleteNote(t)}).then(function(){return a.props.history.goBack()}).catch(function(e){return console.log(e)})},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.context.notes,t=void 0===e?[]:e,a=this.props.id,n=t.find(function(e){return e.id===a})||{id:a,modified:(new Date).toISOString()},r=new Date(n.modified),c=Object(P.format)(r,"do MMM YYYY");return o.a.createElement("div",{className:"Note"},o.a.createElement("h2",{className:"Note__title"},o.a.createElement(b.a,{to:"/note/".concat(this.props.id)},this.props.name)),o.a.createElement("button",{className:"Note__delete",type:"button",onClick:this.handleClickDelete},o.a.createElement(E.a,{icon:"trash-alt"})," remove"),o.a.createElement("div",{className:"Note__dates"},o.a.createElement("div",{className:"Note__dates-modified"},"Modified ",o.a.createElement("span",{className:"Date"},c))))}}]),t}(o.a.Component);S.defaultProps={match:{params:{}},onDeleteNote:function(){}},S.contextType=k,S.defaultProps={id:"",modified:"",name:""};a(204);var A=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props.match.params.folderId,a=this.context.notes,n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t?e.filter(function(e){return e.folderId===t}):e}(void 0===a?[]:a,t);return o.a.createElement("section",{className:"NoteListMain"},o.a.createElement("ul",null,n.map(function(t){return o.a.createElement("li",{key:t.id},o.a.createElement(S,{id:t.id,name:t.name,modified:t.modified,history:e.props.history}))})),o.a.createElement("div",{className:"NoteListMain__button-container"},o.a.createElement(O,{tag:b.a,to:"/add-note",type:"button",className:"NoteListMain__add-note-button"},o.a.createElement(E.a,{icon:"plus"}),o.a.createElement("br",null),"Note")))}}]),t}(o.a.Component);A.defaultProps={history:{goBack:function(){}},match:{params:{}}},A.contextType=k;a(206);var w=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(f.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).handleDeleteNote=function(e){a.props.history.push("/")},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.context.notes,t=void 0===e?[]:e,a=this.props.match.params.noteId,n=_(t,a)||{content:""};return o.a.createElement("section",{className:"NotePageMain"},o.a.createElement(S,{id:n.id,name:n.name,modified:n.modified,onDeleteNote:this.handleDeleteNote,history:this.props.history}),o.a.createElement("div",{className:"NotePageMain__content"},n.content.split(/\n \r|\n/).map(function(e,t){return o.a.createElement("p",{key:t},e)})))}}]),t}(o.a.Component);w.defaultProps={history:{goBack:function(){}},match:{params:{}}},w.contextType=k;a(208);function I(e){return e.message?o.a.createElement("div",{className:"error"},e.message):o.a.createElement(o.a.Fragment,null)}var D=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(f.a)(this,Object(p.a)(t).call(this,e))).state={name:{value:"",changed:!1}},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"updateFolderName",value:function(e){this.setState({name:{value:e,changed:!0}})}},{key:"validateFolderName",value:function(){var e=this.state.name.value.trim();return 0===e.length?"A folder name is required.":e.length<3?"Folder name must be at least 3 characters long.":void 0}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state.name;console.log("Name: ".concat(a.value));var n=new Headers;n.append("Content-Type","application/json");var o={method:"POST",headers:n,body:JSON.stringify({name:a.value}),redirect:"follow"};fetch("".concat(x.PORT_URL,"/api/folders"),o).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})}).then(function(e){t.context.handleAddFolder(e),t.setState({folderName:""}),t.props.history.goBack()}).catch(function(e){return alert("Something went wrong")})}},{key:"render",value:function(){var e=this,t=this.validateFolderName();return o.a.createElement("form",{className:"AddFolder",onSubmit:function(t){return e.handleSubmit(t)}},o.a.createElement("h2",null,"Add a new folder"),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Folder Name"),o.a.createElement("input",{type:"text",className:"name-input",name:"name",id:"name",placeholder:"New Folder",onChange:function(t){return e.updateFolderName(t.target.value)}})),this.state.name.changed&&o.a.createElement(I,{message:t}),o.a.createElement("button",{type:"submit",className:"name-button",disabled:this.validateFolderName()},"Add Folder"))}}]),t}(n.Component);D.defaultProps={history:{goBack:function(){}}},D.contextType=k;a(210);var T=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(f.a)(this,Object(p.a)(t).call(this,e))).handleModified=function(){var e=(new Date).toISOString();a.setState({modified:e})},a.state={name:{value:"",changed:!1},content:{value:"",changed:!1},folderId:{value:"",changed:!1},modified:{value:""}},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.handleModified()}},{key:"updateNoteName",value:function(e){this.setState({name:{value:e,changed:!0}})}},{key:"updateNoteContent",value:function(e){this.setState({content:{value:e,changed:!0}})}},{key:"updateFolderId",value:function(e){this.setState({folderId:{value:e,changed:!0}})}},{key:"validateNoteName",value:function(){var e=this.state.name.value.trim();return 0===e.length?"Note name is required.":e.length<3?"Note name must be at least 3 characters.":void 0}},{key:"validateNoteContent",value:function(){var e=this.state.content.value.trim();return 0===e.length?"Note content is required.":e.length<3?"Note content must be at least 3 characters.":void 0}},{key:"validateFolderId",value:function(){if(0===this.state.folderId.value.trim().length)return"A folder must be selected."}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.name,o=a.content,r=a.folderId,c=a.modified;console.log("Name: ".concat(n.value)),console.log("Content: ".concat(o.value)),console.log("Folder: ".concat(r.value));var l=new Headers;l.append("Content-Type","application/json");var i={method:"POST",headers:l,body:JSON.stringify({name:n.value,content:o.value,folderId:r.value,modified:c}),redirect:"follow"};fetch("".concat(x.PORT_URL,"/api/notes"),i).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})}).then(function(e){t.context.handleAddNote(e),t.props.history.goBack()}).catch(function(e){return alert(e.message)})}},{key:"render",value:function(){var e=this,t=this.context.folders,a=void 0===t?[]:t,n=this.validateNoteName(),r=this.validateNoteContent(),c=this.validateFolderId(),l=a.map(function(e){return o.a.createElement("option",{value:e.id},e.name)});return o.a.createElement("form",{className:"AddNote",onSubmit:function(t){return e.handleSubmit(t)}},o.a.createElement("h2",null,"Add a new note"),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"name"},"Note Name"),o.a.createElement("input",{type:"text",className:"name-input",name:"name",id:"name",placeholder:"New Note",required:!0,onChange:function(t){return e.updateNoteName(t.target.value)}})),this.state.name.changed&&o.a.createElement(I,{message:n}),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"content"},"Note Content"),o.a.createElement("textarea",{type:"text",className:"content-input",name:"content",id:"content",minLength:"3",placeholder:"Note Content",required:!0,onChange:function(t){return e.updateNoteContent(t.target.value)}})),this.state.content.changed&&o.a.createElement(I,{message:r}),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"folder"},"Select A Folder"),o.a.createElement("select",{type:"text",className:"folder-input",name:"folder",id:"folder",placeholder:"Folder Name",required:!0,onChange:function(t){return e.updateFolderId(t.target.value)}},l)),this.state.folderId.changed&&o.a.createElement(I,{message:c}),o.a.createElement("button",{type:"submit",className:"name-button",disabled:this.validateNoteName()||this.validateNoteContent()||this.validateFolderId()},"Add Note"))}}]),t}(n.Component);T.defaultProps={history:{goBack:function(){}}},T.contextType=k,T.defaultProps={folder:[]};a(212);var L=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(f.a)(this,Object(p.a)(t).call(this,e))).state={hasError:!1},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return this.state.hasError?o.a.createElement("div",{className:"ErrorBoundary"},o.a.createElement("h2",null,"Could not display this content.")):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(n.Component),R=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(f.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={notes:[],folders:[]},a.handleAddNote=function(e){a.setState({notes:Object(u.a)(a.state.notes).concat([e])})},a.handleAddFolder=function(e){a.setState({folders:Object(u.a)(a.state.folders).concat([e])})},a.handleDeleteNote=function(e){a.setState({notes:a.state.notes.filter(function(t){return t.id!==e})})},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;Promise.all([fetch("".concat(x.PORT_URL,"/api/notes")),fetch("".concat(x.PORT_URL,"/api/folders"))]).then(function(e){var t=Object(d.a)(e,2),a=t[0],n=t[1];return a.ok?n.ok?Promise.all([a.json(),n.json()]):n.json().then(function(e){return Promise.reject(e)}):a.json().then(function(e){return Promise.reject(e)})}).then(function(t){var a=Object(d.a)(t,2),n=a[0],o=a[1];e.setState({notes:n,folders:o})}).catch(function(e){console.log(e)})}},{key:"renderNavRoutes",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(L,null,["/","/folder/:folderId"].map(function(e){return o.a.createElement(N.a,{exact:!0,key:e,path:e,component:F})}),o.a.createElement(N.a,{path:"/note/:noteId",component:C}),o.a.createElement(N.a,{path:"/add-folder",component:C}),o.a.createElement(N.a,{path:"/add-note",component:C})))}},{key:"renderMainRoutes",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(L,null,["/","/folder/:folderId"].map(function(e){return o.a.createElement(N.a,{exact:!0,key:e,path:e,component:A})}),o.a.createElement(N.a,{path:"/note/:noteId",component:w}),o.a.createElement(N.a,{exact:!0,path:"/add-folder",component:D}),o.a.createElement(N.a,{exact:!0,path:"/add-note",component:T,folder:this.state.folders})))}},{key:"render",value:function(){var e={notes:this.state.notes,folders:this.state.folders,deleteNote:this.handleDeleteNote,handleAddNote:this.handleAddNote,handleAddFolder:this.handleAddFolder};return o.a.createElement(k.Provider,{value:e},o.a.createElement("div",{className:"App"},o.a.createElement("nav",{className:"App__nav"},this.renderNavRoutes()),o.a.createElement("header",{className:"App__header"},o.a.createElement("h1",null,o.a.createElement(b.a,{to:"/"},"Noteful")," ",o.a.createElement(E.a,{icon:"check-double"}))),o.a.createElement("main",{className:"App__main"},this.renderMainRoutes())))}}]),t}(n.Component);l.b.add(i.c,i.b,i.d,i.a),c.a.render(o.a.createElement(s.a,null,o.a.createElement(R,null)),document.getElementById("root"))},81:function(e,t,a){e.exports=a(214)},88:function(e,t,a){},92:function(e,t,a){},94:function(e,t,a){},98:function(e,t,a){}},[[81,2,1]]]);
//# sourceMappingURL=main.e470fb18.chunk.js.map